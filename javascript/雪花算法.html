<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>雪花算法</title>
</head>
<body>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/big-integer/1.6.32/BigInteger.min.js"></script>-->
<a href="http://www.baidu.com">baidu</a>
<script>
    /**
     * 原生BigInt实现
     * **/
    // var Snowflake = /** @class */ (function () {
    //     function Snowflake(_workerId, _dataCenterId, _sequence) {
    //         this.twepoch = 1288834974657n;
    //         //this.twepoch = 0n;
    //         this.workerIdBits = 5n;
    //         this.dataCenterIdBits = 5n;
    //         this.maxWrokerId = -1n ^ (-1n << this.workerIdBits); // 值为：31
    //         this.maxDataCenterId = -1n ^ (-1n << this.dataCenterIdBits); // 值为：31
    //         this.sequenceBits = 12n;
    //         this.workerIdShift = this.sequenceBits; // 值为：12
    //         this.dataCenterIdShift = this.sequenceBits + this.workerIdBits; // 值为：17
    //         this.timestampLeftShift = this.sequenceBits + this.workerIdBits + this.dataCenterIdBits; // 值为：22
    //         this.sequenceMask = -1n ^ (-1n << this.sequenceBits); // 值为：4095
    //         this.lastTimestamp = -1n;
    //         //设置默认值,从环境变量取
    //         this.workerId = 1n;
    //         this.dataCenterId = 1n;
    //         this.sequence = 0n;
    //         if (this.workerId > this.maxWrokerId || this.workerId < 0) {
    //             throw new Error('_workerId must max than 0 and small than maxWrokerId-[' + this.maxWrokerId + ']');
    //         }
    //         if (this.dataCenterId > this.maxDataCenterId || this.dataCenterId < 0) {
    //             throw new Error('_dataCenterId must max than 0 and small than maxDataCenterId-[' + this.maxDataCenterId + ']');
    //         }
    //
    //         this.workerId = BigInt(_workerId);
    //         this.dataCenterId = BigInt(_dataCenterId);
    //         this.sequence = BigInt(_sequence);
    //     }
    //
    //     Snowflake.prototype.tilNextMillis = function (lastTimestamp) {
    //         var timestamp = this.timeGen();
    //         while (timestamp <= lastTimestamp) {
    //             timestamp = this.timeGen();
    //         }
    //         return BigInt(timestamp);
    //     };
    //     Snowflake.prototype.timeGen = function () {
    //         return BigInt(Date.now());
    //     };
    //     Snowflake.prototype.nextId = function () {
    //         var timestamp = this.timeGen();
    //         if (timestamp < this.lastTimestamp) {
    //             throw new Error('Clock moved backwards. Refusing to generate id for ' +
    //                 (this.lastTimestamp - timestamp));
    //         }
    //         if (this.lastTimestamp === timestamp) {
    //             this.sequence = (this.sequence + 1n) & this.sequenceMask;
    //             if (this.sequence === 0n) {
    //                 timestamp = this.tilNextMillis(this.lastTimestamp);
    //             }
    //         } else {
    //             this.sequence = 0n;
    //         }
    //         this.lastTimestamp = timestamp;
    //         return ((timestamp - this.twepoch) << this.timestampLeftShift) |
    //             (this.dataCenterId << this.dataCenterIdShift) |
    //             (this.workerId << this.workerIdShift) |
    //             this.sequence;
    //     };
    //     return Snowflake;
    // }());
    // const x = 2n ** 53n;
    // const y = x + 1n;
    // console.log(y);

    // const alsoHuge = BigInt(9007199254740991);
    // console.log(alsoHuge);
    //
    // const hugeString = BigInt("9007199254740991");
    // console.log(hugeString);
    //
    // // 十六进制
    // const hugeHex = BigInt("0x1fffffffffffff");
    // console.log(hugeHex);
    //
    // // 二进制
    // const hugeBin = BigInt("0b11111111111111111111111111111111111111111111111111111");
    // console.log(hugeHex);

    // const previousMaxSafe = BigInt(Number.MAX_SAFE_INTEGER);
    // console.log(previousMaxSafe);
    //
    // const maxPlusOne = previousMaxSafe + 1n;
    // console.log(maxPlusOne);
    //
    // const theFuture = previousMaxSafe + 2n;
    // console.log(theFuture);
    //
    // const multi = previousMaxSafe * 2n;
    // console.log(multi);
    //
    // const subtr = multi - 10n;
    // console.log(subtr);
    //
    // const mod =  multi % 10n;
    // console.log(mod);
    //
    // const bigN = 2n ** 54n;
    // console.log(bigN);
    //
    // const result = bigN / 2n;
    // console.log(result);


    // console.log(0n === 0); // false
    // console.log(0n == 0);  // true

    // console.log(1n < 2); // true
    // console.log(2n > 1); // true
    // console.log(2n >= 2); // true


    // const mixed = [4n, 6, -12n, 10, 4, 0, 0n];
    // mixed.sort();
    // console.log(mixed);

    window.addEventListener("popstate", (event) => {
        console.log("location: " + document.location + ", state:" + JSON.stringify(event.state))
    })
</script>
</body>
</html>